<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<title>í‹°ìŠ¤í† ë¦¬ ì±Œë¦°ì§€ ë³´ë“œ</title>
<style>
body{font-family:system-ui;background:#f6f7fb;margin:0}
.wrap{max-width:900px;margin:auto;padding:24px}
.card{background:#fff;border-radius:16px;padding:16px;margin-bottom:14px;
box-shadow:0 8px 20px rgba(0,0,0,.08)}
.title{font-weight:700}
.bar{height:12px;border-radius:10px;background:#e5e7eb;overflow:hidden;margin:8px 0}
.fill{height:100%;background:linear-gradient(90deg,#22c55e,#16a34a)}

.last-update {
  font-size: 13px;
  color: #6b7280;
  margin: 6px 0 18px;
}

@media (max-width: 600px) {
  body {
    background: #f9fafb;
  }

  .wrap {
    padding: 16px 12px;
  }

  .card {
    padding: 14px;
    border-radius: 14px;
  }

  .title {
    font-size: 15px;
  }

  .bar {
    height: 10px;
  }

  .fill {
    border-radius: 10px;
  }

  h2 {
    font-size: 20px;
  }
}

</style>
</head>
<body>
<div class="wrap">
<h2>ğŸ“Š í‹°ìŠ¤í† ë¦¬ ì±Œë¦°ì§€ ë³´ë“œ</h2>
<div id="board"></div>
</div>
<div id="lastUpdate" class="last-update">
  ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbziU1KtMHlqrC5RFK3er1Tdyv2O0iLsHz6PUmnWwlQQ06MLGWf_RI-Ecu--ut2RO2fA/exec";

async function load(){
  const res = await fetch(API);
  const data = await res.json();
  const now = new Date();
  const kst = new Date(now.getTime() + 9 * 60 * 60 * 1000);
  document.getElementById("lastUpdate").textContent =
    "ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: " +
    kst.toISOString()
       .replace("T", " ")
       .substring(0, 16) +
    " (KST)";

  const el = document.getElementById("board");
  el.innerHTML = "";

  data.forEach(g=>{
    const p = g.goal ? Math.round(g.current/g.goal*100) : 0;
    el.innerHTML += `
      <div class="card">
        <div class="title">${g.title}</div>
        <div>${g.current} / ${g.goal}ê±´ (${p}%)</div>
        <div class="bar"><div class="fill" style="width:${p}%"></div></div>
      </div>`;
  });
}

load();
setInterval(load, 180000); // 3ë¶„ ìë™ ê°±ì‹ 
</script>
</body>
</html>
